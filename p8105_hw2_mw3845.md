p8105_hw2_mw3845
================
Minghe Wang
2024-09-29

## Problem 1

###### read and clean the data

``` r
#read and clean the data
subway_df = 
  read_csv('./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv', na = "",
    col_types = cols(
    Route8 = col_character(),
    Route9 = col_character(),
    Route10 = col_character(),
    Route11 = col_character())
    ) |>
  janitor::clean_names() |>
  select(line:entry, vending, ada) |>
  mutate(
    entry = ifelse(entry=='YES', TRUE, FALSE)
  )
```

So far, we read and clean the data of NYC’s subway. The data contains
`line`, `station_name`, `station_latitude`, `station longitude`,
`route1` to `route11`, `entry`, `vending`, `entrance_type`, and `ada`.

- Cleaning steps: the variables’ names are converting into lower snake
  case; the 19 variables mentioned above are selected; and `entry` is
  converted into logical variable (`YES` to `TRUE`, `NO` to `FALSE`).
- Dimension: the dimension of resulting dataset is 1868 x 19.

###### Analyze dataset with unique stations:

``` r
uni_station_df = distinct(subway_df, line, station_name, .keep_all=TRUE) |>
  mutate(
    vending = ifelse(vending=='YES', TRUE, FALSE)
  )
```

- How many distinct stations are there?

  *There are 465 stations in the dataset.*

- How many stations are ADA compliant?

  *There are 84 stations are ADA compliant.*

- What proportion of station entrances / exits without vending allow
  entrance?

  *37.7% of station entrances / exits without vending allow entrance.
  Note: Here we are not using the unique station data because a station
  might have multiple entrances / exits that the entry w/o vending could
  happen.*

``` r
subway_df |>
  filter(vending == 'NO') |>
  pull(entry) |>
  mean()
```

    ## [1] 0.3770492

###### Reformatting the data to analyze the stations that serves A train:

``` r
# pivot dataframe longer to count A train
longer_uni_station_df = pivot_longer(
  uni_station_df,
  route1:route11,
  names_to = 'route',
  values_to = 'train'
)
# filter the longer dataframe to count ADA compliant A train
a_train_df = longer_uni_station_df |>
  filter(train == 'A')
```

There are 60 distinct stations serve A train. And 17 of the stations
that serve A train are ADA compliant.

# Problem 2

Here we read the data from `Mr Trash Wheel` sheet in the excel file. For
data cleaning: the variable names are cleaned; non-data entry `...15`
and `...16` are omitted; the empty rows are omitted; and the
`sports_ball` is rounded and converted into the integer variable.
**However, `homes_powered` contains 0s and NAs which instead could be
computed by `weight_tons`, whether should we correct it?**

``` r
mr_trash_df = 
  read_excel('./data/202409 Trash Wheel Collection Data.xlsx', sheet = 'Mr. Trash Wheel') |>
  janitor::clean_names() |>
  select(-x15, -x16) |>
  filter(!if_all(everything(), is.na)) |>
  mutate(sports_balls = as.integer(round(sports_balls)))

tail(trash_df)
```

Similarly, we read and clean the datasets of `Professor Trash Wheel` and
`Gwynnda Trash Wheel` sheets in the excel. These two datasets are
slightly different from `Mr Trash Wheel` that they does not contain
non-data entry nor the `sports_balls` variable.

``` r
prof_trash_df = 
  read_excel('./data/202409 Trash Wheel Collection Data.xlsx', sheet = 'Professor Trash Wheel') |>
  janitor::clean_names() |>
  filter(!if_all(everything(), is.na))

gwy_trash_df = 
  read_excel('./data/202409 Trash Wheel Collection Data.xlsx', sheet = 'Gwynnda Trash Wheel') |>
  janitor::clean_names() |>
  filter(!if_all(everything(), is.na))

gwy_trash_df
```

    ## # A tibble: 264 × 12
    ##    dumpster month   year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr>  <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 July    2021 2021-07-03 00:00:00        0.93                 15
    ##  2        2 July    2021 2021-07-07 00:00:00        2.26                 15
    ##  3        3 July    2021 2021-07-07 00:00:00        1.62                 15
    ##  4        4 July    2021 2021-07-16 00:00:00        1.76                 15
    ##  5        5 July    2021 2021-07-30 00:00:00        1.53                 15
    ##  6        6 August  2021 2021-08-11 00:00:00        2.06                 15
    ##  7        7 August  2021 2021-08-14 00:00:00        1.9                  15
    ##  8        8 August  2021 2021-08-16 00:00:00        2.16                 15
    ##  9        9 August  2021 2021-08-16 00:00:00        2.6                  15
    ## 10       10 August  2021 2021-08-17 00:00:00        3.21                 15
    ## # ℹ 254 more rows
    ## # ℹ 6 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, plastic_bags <dbl>, wrappers <dbl>,
    ## #   homes_powered <dbl>
